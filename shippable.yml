language: ruby

rvm:
  - 2.3.3

branches:
  only:
    - master

env:
  global:
    - secure: PPMlkrJGmHlBDrkf8pALAeRtn9Iscvy4BDFjq/5Wu4WWEbDyTnTAmjdEQVQ6XtYIyC8cy4WdqSD0iVMRwPAbMffJKQ07CMak2nzqaBo8DqCBwWSCWYHIWSfEA54K+sZhJyBg3iyhdXaI7UUoLWlo6O60W6dbmWeHwKC3PywGJBCog5UheKnvRyKTmO1GQ/JXHO8P1uv9cl4fSQExVUAN/QFFZpp8U2+IH4toD9arWr5sqBRIbpPYRscRu3uw/aVprkzDc4ctUm6Ifm2duX+6tsb1oUPx1YpzHpPfImRGKfNZq1ZVmSrF3p0AdxB1g7vp3Y6B5s5fEaF6nuipfyRl+Q==
    - STAGING_BUCKET=www-staging.acebusters.com
    - PRODUCTION_BUCKET=www.acebusters.com

build:
  ci:
    - bundle install
    - S3_BUCKET=$STAGING_BUCKET ./scripts/build.sh

integrations:

  notifications:
    - integrationName: slack_chainfish
      type: slack
      recipients:
        - "#ci"
      branches:
        only:
          - master
      on_success: change
      on_failure: always
      on_start: never
